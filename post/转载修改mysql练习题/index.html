<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>[转改]MySQL练习题 - woohoodai</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="woohoodai" />
  <meta name="description" content=" 题目出自: 【MySQL】经典数据库SQL语句编写练习题——SQL语句扫盲
尽量去看原文. 本文内容是对原文的粘贴和些微修改, 并加入自己的理解, 方便日后遗忘时再练习. 感谢原作者对问题及解答的精心设计 " />

  <meta name="keywords" content="woohoodai, blog" />






<meta name="generator" content="Hugo 0.48" />


<link rel="canonical" href="https://woohoodai.github.io/post/%E8%BD%AC%E8%BD%BD%E4%BF%AE%E6%94%B9mysql%E7%BB%83%E4%B9%A0%E9%A2%98/" />



<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.aaf3394fc81ccb6f6fe3fe458d1f5b61c39f151e44df83baaf1d7b3775a8b98d.css" integrity="sha256-qvM5T8gcy29v4/5FjR9bYcOfFR5E34O6rx17N3WouY0=" media="screen">





<meta property="og:title" content="[转改]MySQL练习题" />
<meta property="og:description" content="
题目出自: 【MySQL】经典数据库SQL语句编写练习题——SQL语句扫盲

尽量去看原文. 本文内容是对原文的粘贴和些微修改, 并加入自己的理解, 方便日后遗忘时再练习. 感谢原作者对问题及解答的精心设计
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://woohoodai.github.io/post/%E8%BD%AC%E8%BD%BD%E4%BF%AE%E6%94%B9mysql%E7%BB%83%E4%B9%A0%E9%A2%98/" /><meta property="article:published_time" content="2017-02-17T23:22:25&#43;00:00"/>
<meta property="article:modified_time" content="2018-12-09T23:36:22&#43;08:00"/>
<meta itemprop="name" content="[转改]MySQL练习题">
<meta itemprop="description" content="
题目出自: 【MySQL】经典数据库SQL语句编写练习题——SQL语句扫盲

尽量去看原文. 本文内容是对原文的粘贴和些微修改, 并加入自己的理解, 方便日后遗忘时再练习. 感谢原作者对问题及解答的精心设计
">


<meta itemprop="datePublished" content="2017-02-17T23:22:25&#43;00:00" />
<meta itemprop="dateModified" content="2017-02-17T23:22:25&#43;00:00" />
<meta itemprop="wordCount" content="3060">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="[转改]MySQL练习题"/>
<meta name="twitter:description" content="
题目出自: 【MySQL】经典数据库SQL语句编写练习题——SQL语句扫盲

尽量去看原文. 本文内容是对原文的粘贴和些微修改, 并加入自己的理解, 方便日后遗忘时再练习. 感谢原作者对问题及解答的精心设计
"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">WooHooDai</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://woohoodai.github.io/">主页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://woohoodai.github.io/post/">文章</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://woohoodai.github.io/tags/">标签</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://woohoodai.github.io/categories/">分类</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://woohoodai.github.io/about/">关于</a>
          
        
      </li>
    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      WooHooDai
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://woohoodai.github.io/">主页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://woohoodai.github.io/post/">文章</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://woohoodai.github.io/tags/">标签</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://woohoodai.github.io/categories/">分类</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://woohoodai.github.io/about/">关于</a>
          

        

      </li>
    
    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">[转改]MySQL练习题</h1>
      
      <div class="post-meta">
        <time datetime="2017-02-17" class="post-time">
          2017-02-17
        </time>
        
        <span class="more-meta"> 约 3060 字 </span>
          <span class="more-meta"> 预计阅读 7 分钟 </span>

        
        

        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#题目">题目</a>
<ul>
<li><a href="#关系模式">关系模式</a></li>
<li><a href="#创建表与插入数据">创建表与插入数据</a></li>
</ul></li>
<li><a href="#要求一">要求一</a></li>
<li><a href="#要求二">要求二</a></li>
<li><a href="#要求三">要求三</a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <blockquote>
<p>题目出自: <a href="http://blog.csdn.net/wolfofsiberian/article/details/39346781">【MySQL】经典数据库SQL语句编写练习题——SQL语句扫盲</a></p>

<p>尽量去看原文. 本文内容是对原文的粘贴和些微修改, 并加入自己的理解, 方便日后遗忘时再练习. 感谢原作者对问题及解答的精心设计
</p>
</blockquote>

<h2 id="题目">题目</h2>

<h3 id="关系模式">关系模式</h3>

<ul>
<li>student(sno, sname, age, sex)</li>
<li>course(cno, cname, teacher)</li>
<li>sc(sno, cno, score)</li>
</ul>

<h3 id="创建表与插入数据">创建表与插入数据</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">create</span> <span class="k">table</span> <span class="k">if</span> <span class="k">not</span> <span class="k">exists</span> <span class="n">student</span>  
<span class="p">(</span>  
    <span class="n">sno</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">primary</span> <span class="k">key</span><span class="p">,</span>  
    <span class="n">sname</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">character</span> <span class="k">set</span> <span class="n">gbk</span><span class="p">,</span>  
    <span class="n">age</span> <span class="nb">int</span><span class="p">,</span>  
    <span class="n">sex</span>  <span class="nb">char</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="nb">character</span> <span class="k">set</span> <span class="n">gbk</span> <span class="k">CHECK</span><span class="p">(</span><span class="n">sex</span> <span class="k">IN</span><span class="p">(</span><span class="s1">&#39;男&#39;</span><span class="p">,</span><span class="s1">&#39;女&#39;</span><span class="p">))</span>   
<span class="p">);</span>  
<span class="k">insert</span> <span class="k">into</span> <span class="n">student</span> <span class="k">values</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;李强&#39;</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="s1">&#39;男&#39;</span><span class="p">);</span>  
<span class="k">insert</span> <span class="k">into</span> <span class="n">student</span> <span class="k">values</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;刘丽&#39;</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="s1">&#39;女&#39;</span><span class="p">);</span>  
<span class="k">insert</span> <span class="k">into</span> <span class="n">student</span> <span class="k">values</span><span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="s1">&#39;张友&#39;</span><span class="p">,</span><span class="mi">22</span><span class="p">,</span><span class="s1">&#39;男&#39;</span><span class="p">);</span>  
  
<span class="k">create</span> <span class="k">table</span> <span class="k">if</span> <span class="k">not</span> <span class="k">exists</span> <span class="n">course</span>  
<span class="p">(</span>  
    <span class="n">cno</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">primary</span> <span class="k">key</span><span class="p">,</span>  
    <span class="n">cname</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">character</span> <span class="k">set</span> <span class="n">gbk</span><span class="p">,</span>  
    <span class="n">teacher</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="nb">character</span> <span class="k">set</span> <span class="n">gbk</span>  
<span class="p">);</span>  
<span class="k">insert</span> <span class="k">into</span> <span class="n">course</span> <span class="k">values</span><span class="p">(</span><span class="s1">&#39;K1&#39;</span><span class="p">,</span><span class="s1">&#39;C语言&#39;</span><span class="p">,</span><span class="s1">&#39;王华&#39;</span><span class="p">);</span>  
<span class="k">insert</span> <span class="k">into</span> <span class="n">course</span> <span class="k">values</span><span class="p">(</span><span class="s1">&#39;K5&#39;</span><span class="p">,</span><span class="s1">&#39;数据库原理&#39;</span><span class="p">,</span><span class="s1">&#39;程军&#39;</span><span class="p">);</span>  
<span class="k">insert</span> <span class="k">into</span> <span class="n">course</span> <span class="k">values</span><span class="p">(</span><span class="s1">&#39;K8&#39;</span><span class="p">,</span><span class="s1">&#39;编译原理&#39;</span><span class="p">,</span><span class="s1">&#39;程军&#39;</span><span class="p">);</span>  
  
<span class="k">create</span> <span class="k">table</span> <span class="k">if</span> <span class="k">not</span> <span class="k">exists</span> <span class="n">sc</span>  
<span class="p">(</span>  
    <span class="n">sno</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>  
    <span class="n">cno</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>  
    <span class="n">score</span> <span class="nb">int</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>  
    <span class="k">primary</span> <span class="k">key</span> <span class="p">(</span><span class="n">sno</span><span class="p">,</span><span class="n">cno</span><span class="p">),</span>  
    <span class="k">foreign</span> <span class="k">key</span> <span class="p">(</span><span class="n">sno</span><span class="p">)</span> <span class="k">references</span> <span class="n">student</span><span class="p">(</span><span class="n">sno</span><span class="p">),</span>  
    <span class="k">foreign</span> <span class="k">key</span> <span class="p">(</span><span class="n">cno</span><span class="p">)</span> <span class="k">references</span> <span class="n">course</span><span class="p">(</span><span class="n">cno</span><span class="p">)</span>  
<span class="p">);</span>  
<span class="k">insert</span> <span class="k">into</span> <span class="n">sc</span> <span class="k">values</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="s1">&#39;K1&#39;</span><span class="p">,</span><span class="mi">83</span><span class="p">);</span>  
<span class="k">insert</span> <span class="k">into</span> <span class="n">sc</span> <span class="k">values</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;K1&#39;</span><span class="p">,</span><span class="mi">85</span><span class="p">);</span>  
<span class="k">insert</span> <span class="k">into</span> <span class="n">sc</span> <span class="k">values</span><span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="s1">&#39;K1&#39;</span><span class="p">,</span><span class="mi">92</span><span class="p">);</span>  
<span class="k">insert</span> <span class="k">into</span> <span class="n">sc</span> <span class="k">values</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="s1">&#39;K5&#39;</span><span class="p">,</span><span class="mi">90</span><span class="p">);</span>  
<span class="k">insert</span> <span class="k">into</span> <span class="n">sc</span> <span class="k">values</span><span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="s1">&#39;K5&#39;</span><span class="p">,</span><span class="mi">84</span><span class="p">);</span>  
<span class="k">insert</span> <span class="k">into</span> <span class="n">sc</span> <span class="k">values</span><span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="s1">&#39;K8&#39;</span><span class="p">,</span><span class="mi">80</span><span class="p">);</span>  </code></pre></td></tr></table>
</div>
</div>
<h2 id="要求一">要求一</h2>

<p>1.检索选修了&rdquo;程军&rdquo;老师所有课程的学生姓名</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- 详细说明见要求一4
</span><span class="c1"></span><span class="k">select</span> <span class="n">sname</span> <span class="k">from</span> <span class="n">student</span>
<span class="k">where</span> <span class="k">not</span> <span class="k">exists</span> <span class="p">(</span>
    <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">course</span> 
    <span class="k">where</span> <span class="n">course</span><span class="p">.</span><span class="n">teacher</span><span class="o">=</span><span class="s2">&#34;程军&#34;</span> <span class="k">and</span> <span class="k">not</span> <span class="k">exists</span> <span class="p">(</span>
        <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">sc</span>
        <span class="k">where</span> <span class="n">sc</span><span class="p">.</span><span class="n">cno</span><span class="o">=</span><span class="n">course</span><span class="p">.</span><span class="n">cno</span> <span class="k">and</span> <span class="n">sc</span><span class="p">.</span><span class="n">sno</span><span class="o">=</span><span class="n">student</span><span class="p">.</span><span class="n">sno</span>
    <span class="p">)</span>
<span class="p">);</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- 选修了至少一门&#34;程军&#34;老师课程的学生姓名
</span><span class="c1"></span><span class="k">select</span> <span class="n">sname</span> <span class="k">from</span> <span class="n">student</span>
<span class="k">where</span> <span class="k">exists</span> <span class="p">(</span>
    <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">course</span> 
    <span class="k">where</span> <span class="n">course</span><span class="p">.</span><span class="n">teacher</span><span class="o">=</span><span class="s2">&#34;程军&#34;</span> <span class="k">and</span> <span class="k">exists</span> <span class="p">(</span>
        <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">sc</span>
        <span class="k">where</span> <span class="n">sc</span><span class="p">.</span><span class="n">cno</span><span class="o">=</span><span class="n">course</span><span class="p">.</span><span class="n">cno</span> <span class="k">and</span> <span class="n">sc</span><span class="p">.</span><span class="n">sno</span><span class="o">=</span><span class="n">student</span><span class="p">.</span><span class="n">sno</span>
    <span class="p">)</span>
<span class="p">);</span>

<span class="c1">-- 没有选修任意一门&#34;程军&#34;老师课程的学生姓名
</span><span class="c1"></span><span class="k">select</span> <span class="n">sname</span> <span class="k">from</span> <span class="n">student</span>
<span class="k">where</span> <span class="k">not</span> <span class="k">exists</span> <span class="p">(</span>
    <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">course</span> 
    <span class="k">where</span> <span class="n">course</span><span class="p">.</span><span class="n">teacher</span><span class="o">=</span><span class="s2">&#34;程军&#34;</span> <span class="k">and</span> <span class="k">exists</span> <span class="p">(</span>
        <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">sc</span>
        <span class="k">where</span> <span class="n">sc</span><span class="p">.</span><span class="n">cno</span><span class="o">=</span><span class="n">course</span><span class="p">.</span><span class="n">cno</span> <span class="k">and</span> <span class="n">sc</span><span class="p">.</span><span class="n">sno</span><span class="o">=</span><span class="n">student</span><span class="p">.</span><span class="n">sno</span>
    <span class="p">)</span>
<span class="p">);</span>

<span class="c1">-- 至少有一门&#34;程军&#34;老师的课程没有选修的学生姓名
</span><span class="c1"></span><span class="k">select</span> <span class="n">sname</span> <span class="k">from</span> <span class="n">student</span>
<span class="k">where</span> <span class="k">exists</span> <span class="p">(</span>
    <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">course</span> 
    <span class="k">where</span> <span class="n">course</span><span class="p">.</span><span class="n">teacher</span><span class="o">=</span><span class="s2">&#34;程军&#34;</span> <span class="k">and</span> <span class="k">not</span> <span class="k">exists</span> <span class="p">(</span>
        <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">sc</span>
        <span class="k">where</span> <span class="n">sc</span><span class="p">.</span><span class="n">cno</span><span class="o">=</span><span class="n">course</span><span class="p">.</span><span class="n">cno</span> <span class="k">and</span> <span class="n">sc</span><span class="p">.</span><span class="n">sno</span><span class="o">=</span><span class="n">student</span><span class="p">.</span><span class="n">sno</span>
    <span class="p">)</span>
<span class="p">);</span></code></pre></td></tr></table>
</div>
</div>
<p>2.检索＂李强＂同学不学课程的课程号</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- 解法1
</span><span class="c1"></span><span class="k">select</span> <span class="n">cno</span> <span class="k">from</span> <span class="n">course</span>
<span class="k">where</span> <span class="k">not</span> <span class="k">exists</span> <span class="p">(</span>
	<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">sc</span>
    <span class="k">where</span> <span class="n">sc</span><span class="p">.</span><span class="n">sno</span><span class="o">=</span><span class="p">(</span><span class="k">select</span> <span class="n">sno</span> <span class="k">from</span> <span class="n">student</span> <span class="k">where</span> <span class="n">sname</span><span class="o">=</span><span class="s2">&#34;李强&#34;</span><span class="p">)</span> <span class="k">and</span> <span class="n">sc</span><span class="p">.</span><span class="n">cno</span><span class="o">=</span><span class="n">course</span><span class="p">.</span><span class="n">cno</span>
<span class="p">);</span>

<span class="c1">-- 解法2
</span><span class="c1"></span><span class="k">select</span> <span class="n">cno</span> <span class="k">from</span> <span class="n">course</span>
<span class="k">where</span> <span class="n">cno</span> <span class="k">not</span> <span class="k">in</span> <span class="p">(</span>
	<span class="k">select</span> <span class="n">cno</span> <span class="k">from</span> <span class="n">sc</span>
    <span class="k">where</span> <span class="n">sc</span><span class="p">.</span><span class="n">sno</span><span class="o">=</span><span class="p">(</span><span class="k">select</span> <span class="n">sno</span> <span class="k">from</span> <span class="n">student</span> <span class="k">where</span> <span class="n">sname</span><span class="o">=</span><span class="s2">&#34;李强&#34;</span><span class="p">)</span> <span class="k">and</span> <span class="n">sc</span><span class="p">.</span><span class="n">cno</span><span class="o">=</span><span class="n">course</span><span class="p">.</span><span class="n">cno</span>
<span class="p">);</span></code></pre></td></tr></table>
</div>
</div>
<p>3.检索选修不少于3门课程的学生学号</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- 解法1
</span><span class="c1"></span><span class="k">select</span> <span class="n">sno</span> 
<span class="k">from</span> <span class="p">(</span><span class="k">select</span> <span class="n">sno</span><span class="p">,</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">count</span> <span class="k">from</span> <span class="n">sc</span> <span class="k">group</span> <span class="k">by</span> <span class="n">sno</span><span class="p">)</span> <span class="n">tmp</span>
<span class="k">where</span> <span class="k">count</span><span class="o">&gt;=</span><span class="mi">3</span>

<span class="c1">-- 解法2 过滤分组_HAVING
</span><span class="c1"></span><span class="k">select</span> <span class="n">sno</span> <span class="k">from</span> <span class="n">sc</span>
<span class="k">group</span> <span class="k">by</span> <span class="n">cno</span>
<span class="k">having</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="o">&gt;=</span><span class="mi">3</span></code></pre></td></tr></table>
</div>
</div>
<p>4.检索选修全部课程的学生姓名</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span> <span class="n">sname</span> <span class="k">from</span> <span class="n">student</span>
<span class="k">where</span> <span class="k">not</span> <span class="k">exists</span> <span class="p">(</span>
	<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">course</span>
    <span class="k">where</span> <span class="k">not</span> <span class="k">exists</span> <span class="p">(</span>
		<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">sc</span>
        <span class="k">where</span> <span class="n">course</span><span class="p">.</span><span class="n">cno</span><span class="o">=</span><span class="n">sc</span><span class="p">.</span><span class="n">cno</span> <span class="k">and</span> <span class="n">student</span><span class="p">.</span><span class="n">sno</span><span class="o">=</span><span class="n">sc</span><span class="p">.</span><span class="n">sno</span>
    <span class="p">)</span>
<span class="p">);</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li>运算符<code>EXISTS</code>和<code>NOT EXISTS</code>用于检测某个子查询是否返回了行

<ul>
<li><code>select exists (select * from sometable);</code></li>
<li><code>select not exists (select * from sometable);</code></li>
<li>若表sometable为空,则前一个语句返回0,后一个语句返回1</li>
</ul></li>
<li>相关子查询

<ul>
<li><code>select j from t2 where j in (select i from t1)</code></li>
<li><code>select j from t2 where j in (select i from t1 where i=j)</code></li>
<li>前一个语句中的子查询为不相关子查询, 因为其没有引用外层查询的值,该子查询可以作为独立的查询语句执行</li>
<li>后一个语句中的子查询为相关子查询, 因为其引用了外层查询的值,该子查询语句博客独立执行</li>
<li>相关子查询原理: 将值从外层查询传递到子查询中,并检查它们是否满足子查询里指定的条件</li>
<li>相关子查询通常用在EXISTS和NOT EXISTS子查询里,这类子查询主要用于在某个表里查找在另一个表里有匹配行或没有匹配行的行</li>
</ul></li>
<li>这个答案的过程是这样的

<ul>
<li>选取最外层的学生1,传递进去</li>
<li>依次选取中间层的各个课程K1,K5,K8,传递进去</li>
<li>在与最内层的所有元组进行比较, 最外层和中间层的所有组合在最内层中都有对应元组即可被保留到结果中(这里的语义即: 该同学(最外层)选修了(内层)所有课程(中间层))</li>
</ul></li>
<li>还可参考<a href="http://blog.csdn.net/qsyzb/article/details/12523051">这个例子</a></li>
</ul>

<p>5.检索不学&rdquo;C语言&rdquo;的学生信息</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- 最直接最好理解的
</span><span class="c1"></span><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">student</span>
<span class="k">where</span> <span class="n">sno</span> <span class="k">not</span> <span class="k">in</span> <span class="p">(</span>
    <span class="k">select</span> <span class="n">sno</span> <span class="k">from</span> <span class="n">sc</span>
    <span class="k">where</span> <span class="n">cno</span><span class="o">=</span><span class="p">(</span><span class="k">select</span> <span class="n">cno</span> <span class="k">from</span> <span class="n">course</span> <span class="k">where</span> <span class="n">cname</span><span class="o">=</span><span class="s2">&#34;C语言&#34;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">-- 原文答案
</span><span class="c1"></span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">student</span>  
<span class="k">WHERE</span> <span class="n">sno</span> <span class="k">not</span> <span class="k">in</span>  
<span class="p">(</span>  
    <span class="k">SELECT</span> <span class="n">sc</span><span class="p">.</span><span class="n">sno</span> <span class="k">FROM</span> <span class="n">sc</span><span class="p">,</span><span class="n">course</span>  
    <span class="k">WHERE</span> <span class="n">course</span><span class="p">.</span><span class="n">cno</span><span class="o">=</span><span class="n">sc</span><span class="p">.</span><span class="n">cno</span>  
<span class="p">);</span>

<span class="c1">-- 类似于原答案的
</span><span class="c1"></span><span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">student</span>
<span class="k">where</span> <span class="n">sno</span> <span class="k">not</span> <span class="k">in</span> <span class="p">(</span>
	<span class="k">select</span> <span class="n">sno</span> <span class="k">from</span> <span class="n">course</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">sc</span>
    <span class="k">where</span> <span class="n">course</span><span class="p">.</span><span class="n">cno</span><span class="o">=</span><span class="n">sc</span><span class="p">.</span><span class="n">cno</span> <span class="k">and</span> <span class="n">course</span><span class="p">.</span><span class="n">cname</span><span class="o">=</span><span class="s2">&#34;C语言&#34;</span>
<span class="p">);</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="要求二">要求二</h2>

<ol>
<li>查询“程军”老师所教授的所有课程</li>
<li>查询“李强”同学所有课程的成绩</li>
<li>查询课程名为“C语言”的平均成绩</li>
<li>查询选修了所有课程的同学信息</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="mi">1</span><span class="p">.</span>
<span class="k">select</span> <span class="n">cname</span> <span class="k">from</span> <span class="n">course</span>
<span class="k">where</span> <span class="n">teacher</span><span class="o">=</span><span class="s2">&#34;程军&#34;</span><span class="p">;</span>

<span class="mi">2</span><span class="p">.</span>
<span class="k">select</span> <span class="n">cname</span><span class="p">,</span> <span class="n">score</span> <span class="k">from</span> <span class="n">course</span><span class="p">,</span> <span class="n">sc</span>
<span class="k">where</span> <span class="n">sc</span><span class="p">.</span><span class="n">sno</span><span class="o">=</span><span class="p">(</span><span class="k">select</span> <span class="n">sno</span> <span class="k">from</span> <span class="n">student</span> <span class="k">where</span> <span class="n">sname</span><span class="o">=</span><span class="s2">&#34;李强&#34;</span><span class="p">)</span> <span class="k">and</span>
      <span class="n">sc</span><span class="p">.</span><span class="n">cno</span><span class="o">=</span><span class="n">course</span><span class="p">.</span><span class="n">cno</span><span class="p">;</span>

<span class="mi">3</span><span class="p">.</span>
<span class="k">select</span> <span class="k">avg</span><span class="p">(</span><span class="n">score</span><span class="p">)</span> <span class="k">from</span> <span class="n">sc</span>
<span class="k">where</span> <span class="n">sc</span><span class="p">.</span><span class="n">cno</span><span class="o">=</span><span class="p">(</span><span class="k">select</span> <span class="n">cno</span> <span class="k">from</span> <span class="n">course</span> <span class="k">where</span> <span class="n">cname</span><span class="o">=</span><span class="s2">&#34;C语言&#34;</span><span class="p">);</span>

<span class="mi">4</span><span class="p">.</span>
<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">student</span>
<span class="k">where</span> <span class="k">not</span> <span class="k">exists</span> <span class="p">(</span>
    <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">course</span>
    <span class="k">where</span> <span class="k">not</span> <span class="k">exists</span> <span class="p">(</span>
        <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">sc</span>
        <span class="k">where</span> <span class="n">sc</span><span class="p">.</span><span class="n">cno</span><span class="o">=</span><span class="n">course</span><span class="p">.</span><span class="n">cno</span> <span class="k">and</span> <span class="n">sc</span><span class="p">.</span><span class="n">sno</span><span class="o">=</span><span class="n">student</span><span class="p">.</span><span class="n">sno</span>
    <span class="p">)</span>
<span class="p">);</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="要求三">要求三</h2>

<ol>
<li>检索王老师所授课程的课程号和课程名</li>
<li>检索年龄大于23岁的男学生的学号和姓名</li>
<li>检索至少选修王老师所授课程中一门课程的女学生姓名</li>
<li>检索李同学不学的课程的课程号</li>
<li>检索至少选修两门课程的学生学号</li>
<li>检索全部学生都选修的课程的课程号与课程名</li>
<li>检索选修课程包含王老师所授课的学生学号</li>
<li>统计有学生选修的课程门数</li>
<li>求选修K1课程的学生的平均年龄</li>
<li>求王老师所授课程的每门课程的学生平均成绩</li>
<li>统计每门课程的学生选修人数（超过2人的课程才统计）。要求输出课程号和选修人数，查询结果按人数降序排列，若人数相同，按课程号升序排列</li>
<li>检索学号比李同学大，而年龄比他小的学生姓名</li>
<li>检索姓名以李打头的所有学生的姓名和年龄</li>
<li>在SC中检索成绩为空值的学生学号和课程号</li>
<li>求年龄大于女同学平均年龄的男学生姓名和年龄</li>
<li>求年龄大于所有女同学年龄的男学生姓名和年龄</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sql" data-lang="sql"><span class="mi">1</span><span class="p">.</span>
<span class="k">select</span> <span class="n">cno</span><span class="p">,</span> <span class="n">cname</span> <span class="k">from</span> <span class="n">course</span>
<span class="k">where</span> <span class="n">teacher</span><span class="o">=</span><span class="s2">&#34;王老师&#34;</span><span class="p">;</span>

<span class="mi">2</span><span class="p">.</span>
<span class="k">select</span> <span class="n">sno</span><span class="p">,</span> <span class="n">sname</span> <span class="k">from</span> <span class="n">student</span>
<span class="k">where</span> <span class="n">age</span><span class="o">&gt;</span><span class="mi">23</span><span class="p">;</span>

<span class="mi">3</span><span class="p">.</span>
<span class="k">select</span> <span class="n">sname</span> <span class="k">from</span> <span class="n">student</span>
<span class="k">where</span> <span class="n">sex</span><span class="o">=</span><span class="s2">&#34;女&#34;</span> <span class="k">and</span> <span class="n">sno</span> <span class="k">in</span> <span class="p">(</span><span class="k">select</span> <span class="n">sno</span> <span class="k">from</span> <span class="n">sc</span> <span class="k">where</span> <span class="n">sc</span><span class="p">.</span><span class="n">cno</span><span class="o">=</span><span class="p">(</span><span class="k">select</span> <span class="n">cno</span> <span class="k">from</span> <span class="n">course</span> <span class="k">where</span> <span class="n">teacher</span> <span class="k">like</span> <span class="s2">&#34;王%&#34;</span><span class="p">));</span>

<span class="mi">4</span><span class="p">.</span>
<span class="c1">-- 解法1
</span><span class="c1"></span><span class="k">select</span> <span class="n">cno</span> <span class="k">from</span> <span class="n">course</span>
<span class="k">where</span> <span class="k">not</span> <span class="k">exists</span> <span class="p">(</span>
	<span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">sc</span>
    <span class="k">where</span> <span class="n">sc</span><span class="p">.</span><span class="n">cno</span><span class="o">=</span><span class="n">course</span><span class="p">.</span><span class="n">cno</span> <span class="k">and</span> <span class="n">sc</span><span class="p">.</span><span class="n">sno</span><span class="o">=</span><span class="p">(</span><span class="k">select</span> <span class="n">sno</span> <span class="k">from</span> <span class="n">student</span> <span class="k">where</span> <span class="n">sname</span> <span class="k">like</span> <span class="s2">&#34;李%&#34;</span><span class="p">)</span>
<span class="p">);</span>

<span class="c1">-- 解法2
</span><span class="c1"></span><span class="k">select</span> <span class="n">cno</span> <span class="k">from</span> <span class="n">course</span>
<span class="k">where</span> <span class="n">cno</span> <span class="k">not</span> <span class="k">in</span> <span class="p">(</span>
	<span class="k">select</span> <span class="n">cno</span> <span class="k">from</span> <span class="n">sc</span>
	<span class="k">where</span> <span class="n">sno</span><span class="o">=</span><span class="p">(</span><span class="k">select</span> <span class="n">sno</span> <span class="k">from</span> <span class="n">student</span> <span class="k">where</span> <span class="n">sname</span> <span class="k">like</span> <span class="s2">&#34;李%&#34;</span><span class="p">)</span>
<span class="p">);</span>

<span class="mi">5</span><span class="p">.</span>
<span class="c1">-- 解法1
</span><span class="c1"></span><span class="k">select</span> <span class="n">sno</span> <span class="k">from</span> <span class="p">(</span>
	<span class="k">select</span> <span class="n">sno</span><span class="p">,</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">count</span> <span class="k">from</span> <span class="n">sc</span>
	<span class="k">group</span> <span class="k">by</span> <span class="n">sno</span><span class="p">)</span> <span class="n">tmp</span>
<span class="k">where</span> <span class="k">count</span><span class="o">&gt;=</span><span class="mi">2</span><span class="p">;</span>

<span class="c1">-- 解法2
</span><span class="c1"></span><span class="k">select</span> <span class="n">sno</span> <span class="k">from</span> <span class="n">sc</span>
<span class="k">group</span> <span class="k">by</span> <span class="n">cno</span>
<span class="k">having</span> <span class="n">cno</span><span class="o">&gt;=</span><span class="mi">2</span><span class="p">;</span>

<span class="mi">6</span><span class="p">.</span>
<span class="c1">-- 先得到一个tmp表,包含所有课程在sc中出现的次数.再判断出现次数是否与学生总人数相等
</span><span class="c1"></span><span class="k">select</span> <span class="k">distinct</span> <span class="n">sc</span><span class="p">.</span><span class="n">cno</span><span class="p">,</span> <span class="n">cname</span> <span class="k">from</span> <span class="n">course</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">sc</span> <span class="k">on</span> <span class="n">course</span><span class="p">.</span><span class="n">cno</span><span class="o">=</span><span class="n">sc</span><span class="p">.</span><span class="n">cno</span><span class="p">,</span> <span class="p">(</span><span class="k">select</span> <span class="n">cno</span><span class="p">,</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">count</span> <span class="k">from</span> <span class="n">sc</span> <span class="k">group</span> <span class="k">by</span> <span class="n">cno</span><span class="p">)</span> <span class="n">tmp</span>
<span class="k">where</span> <span class="p">(</span><span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">student</span><span class="p">)</span><span class="o">=</span><span class="n">tmp</span><span class="p">.</span><span class="k">count</span><span class="p">;</span>

<span class="c1">-- 解法2
</span><span class="c1"></span><span class="k">select</span> <span class="n">sc</span><span class="p">.</span><span class="n">cno</span><span class="p">,</span> <span class="n">cname</span> <span class="k">from</span> <span class="n">sc</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">course</span> <span class="k">on</span> <span class="n">sc</span><span class="p">.</span><span class="n">cno</span><span class="o">=</span><span class="n">course</span><span class="p">.</span><span class="n">cno</span>
<span class="k">group</span> <span class="k">by</span> <span class="n">sc</span><span class="p">.</span><span class="n">cno</span>
<span class="k">having</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="o">=</span><span class="p">(</span><span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">student</span><span class="p">);</span>

<span class="mi">7</span><span class="p">.</span>
<span class="k">select</span> <span class="k">distinct</span> <span class="n">sno</span> <span class="k">from</span> <span class="n">sc</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">course</span> <span class="k">on</span> <span class="n">sc</span><span class="p">.</span><span class="n">cno</span><span class="o">=</span><span class="n">course</span><span class="p">.</span><span class="n">cno</span>
<span class="k">where</span> <span class="n">teacher</span> <span class="k">like</span> <span class="s2">&#34;王%&#34;</span><span class="p">;</span>

<span class="mi">8</span><span class="p">.</span>
<span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="p">(</span>
    <span class="k">select</span> <span class="o">*</span> <span class="k">from</span> <span class="n">sc</span>
    <span class="k">group</span> <span class="k">by</span> <span class="n">cno</span>
<span class="p">)</span> <span class="n">tmp</span><span class="p">;</span>

<span class="mi">9</span><span class="p">.</span>
<span class="k">select</span> <span class="k">avg</span><span class="p">(</span><span class="n">age</span><span class="p">)</span> <span class="k">from</span> <span class="n">student</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">sc</span> <span class="k">on</span> <span class="n">student</span><span class="p">.</span><span class="n">sno</span><span class="o">=</span><span class="n">sc</span><span class="p">.</span><span class="n">sno</span>
<span class="k">where</span> <span class="n">sc</span><span class="p">.</span><span class="n">cno</span><span class="o">=</span><span class="s2">&#34;K1&#34;</span><span class="p">;</span>

<span class="mi">10</span><span class="p">.</span>
<span class="k">select</span> <span class="n">cno</span><span class="p">,</span> <span class="k">avg</span><span class="p">(</span><span class="n">score</span><span class="p">)</span> <span class="k">from</span> <span class="p">(</span>
    <span class="k">select</span> <span class="n">sc</span><span class="p">.</span><span class="n">cno</span><span class="p">,</span> <span class="n">score</span> <span class="k">from</span> <span class="n">sc</span> <span class="k">inner</span> <span class="k">join</span> <span class="n">course</span> <span class="k">on</span> <span class="n">sc</span><span class="p">.</span><span class="n">cno</span><span class="o">=</span><span class="n">course</span><span class="p">.</span><span class="n">cno</span>
    <span class="k">where</span> <span class="n">teacher</span> <span class="k">like</span> <span class="s2">&#34;王%&#34;</span>
<span class="p">)</span> <span class="n">tmp</span>
<span class="k">group</span> <span class="k">by</span> <span class="n">cno</span><span class="p">;</span>

<span class="mi">11</span><span class="p">.</span>
<span class="k">select</span> <span class="n">cno</span><span class="p">,</span> <span class="k">count</span> <span class="k">from</span> <span class="p">(</span><span class="k">select</span> <span class="n">cno</span><span class="p">,</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">count</span> <span class="k">from</span> <span class="n">sc</span> <span class="k">group</span> <span class="k">by</span> <span class="n">cno</span><span class="p">)</span> <span class="n">tmp</span>
<span class="k">where</span> <span class="k">count</span><span class="o">&gt;=</span><span class="mi">2</span>
<span class="k">order</span> <span class="k">by</span> <span class="k">count</span> <span class="k">desc</span><span class="p">,</span> <span class="n">cno</span> <span class="k">asc</span><span class="p">;</span>

<span class="mi">12</span><span class="p">.</span>
<span class="k">select</span> <span class="n">sname</span> <span class="k">from</span> <span class="n">student</span><span class="p">,</span> <span class="p">(</span>
    <span class="k">select</span> <span class="k">max</span><span class="p">(</span><span class="n">sno</span><span class="p">)</span> <span class="n">lisno</span><span class="p">,</span> <span class="k">min</span><span class="p">(</span><span class="n">age</span><span class="p">)</span> <span class="n">liage</span>  <span class="k">from</span> <span class="n">student</span>
    <span class="k">where</span> <span class="n">sname</span> <span class="k">like</span> <span class="s2">&#34;李%&#34;</span>
    <span class="p">)</span> <span class="n">li</span>
<span class="k">where</span> <span class="n">sno</span><span class="o">&gt;</span><span class="n">lisno</span> <span class="k">and</span> <span class="n">age</span><span class="o">&lt;</span><span class="n">liage</span><span class="p">;</span>

<span class="mi">13</span><span class="p">.</span>
<span class="k">select</span> <span class="n">sname</span><span class="p">,</span> <span class="n">age</span> <span class="k">from</span> <span class="n">student</span>
<span class="k">where</span> <span class="n">sname</span> <span class="k">like</span> <span class="s2">&#34;李%&#34;</span><span class="p">;</span>

<span class="mi">14</span><span class="p">.</span>
<span class="k">select</span> <span class="n">sno</span><span class="p">,</span> <span class="n">cno</span> <span class="k">from</span> <span class="n">sc</span>
<span class="k">where</span> <span class="n">sc</span><span class="p">.</span><span class="n">score</span><span class="o">=</span><span class="k">NULL</span><span class="p">;</span>

<span class="mi">15</span><span class="p">.</span>
<span class="k">select</span> <span class="n">sname</span><span class="p">,</span> <span class="n">age</span> <span class="k">from</span> <span class="n">student</span>
<span class="k">where</span> <span class="n">sex</span><span class="o">=</span><span class="s2">&#34;男&#34;</span> <span class="k">and</span>
	  <span class="n">age</span> <span class="o">&gt;</span> <span class="p">(</span>
          <span class="k">select</span> <span class="k">avg</span><span class="p">(</span><span class="n">age</span><span class="p">)</span> <span class="k">from</span> <span class="n">student</span>
          <span class="k">where</span> <span class="n">sex</span><span class="o">=</span><span class="s2">&#34;女&#34;</span>
      <span class="p">);</span>

<span class="mi">16</span><span class="p">.</span>
<span class="k">select</span> <span class="n">sname</span><span class="p">,</span> <span class="n">age</span> <span class="k">from</span> <span class="n">student</span>
<span class="k">where</span> <span class="n">sex</span><span class="o">=</span><span class="s2">&#34;男&#34;</span> <span class="k">and</span>
	  <span class="n">age</span> <span class="o">&gt;</span> <span class="p">(</span>
          <span class="k">select</span> <span class="k">max</span><span class="p">(</span><span class="n">age</span><span class="p">)</span> <span class="k">from</span> <span class="n">student</span>
          <span class="k">where</span> <span class="n">sex</span><span class="o">=</span><span class="s2">&#34;女&#34;</span>
      <span class="p">);</span></code></pre></td></tr></table>
</div>
</div>
    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">woohoodai</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">2018-12-09</span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a></a></span>
  </p>
</div>


    
    

    <footer class="post-footer">
      

      
      <nav class="post-nav">
        
        
          <a class="next" href="/post/mysql%E5%A4%87%E5%BF%98/">
            <span class="next-text nav-default">MySQL备忘</span>
            <span class="prev-text nav-mobile">下一篇</span>
            
            <i class="iconfont">
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

            </i>
          </a>
      </nav>
    </footer>
  </article>

  
  

  
  

  
  

  

  

  
  
    



        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  
  
    <a href="mailto:woohoodai@gmail.com" rel="me noopener" class="iconfont"
      title="email" >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>


<a href="https://woohoodai.github.io/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
  
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2016 -
    2018
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        woohoodai
        
      </span></span>

  
  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js" integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ="></script>






  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  













</body>
</html>
